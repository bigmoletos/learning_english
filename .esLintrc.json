{
    /*
     * ENVIRONNEMENTS
     * Déclare les environnements dans lesquels le code s'exécute.
     * Cela permet à ESLint de connaître les variables globales disponibles.
     */
    "env": {
      "browser": true,   // Active les variables globales du navigateur (window, document, etc.)
      "es2021": true,    // Active les fonctionnalités ES2021 (ex: Promise.any, replaceAll)
      "node": true       // Active les variables globales Node.js (require, module, etc.)
    },

    /*
     * EXTENSIONS
     * Étend les configurations ESLint existantes pour hériter de leurs règles.
     * Ordre important : les règles des extensions ultérieures écrasent les précédentes.
     */
    "extends": [
      "eslint:recommended",                      // Règles de base recommandées par ESLint
      "plugin:react/recommended",                // Règles spécifiques à React
      "plugin:react-hooks/recommended",          // Règles pour les React Hooks (useState, useEffect, etc.)
      "plugin:@typescript-eslint/recommended"    // Règles TypeScript recommandées
    ],

    /*
     * PARSEUR
     * Spécifie le parseur à utiliser pour analyser le code.
     * @typescript-eslint/parser pour supporter TypeScript.
     */
    "parser": "@typescript-eslint/parser",

    /*
     * OPTIONS DU PARSEUR
     * Configure le comportement du parseur.
     */
    "parserOptions": {
      "ecmaFeatures": {
        "jsx": true  // Active le support JSX
      },
      "ecmaVersion": "latest",  // Utilise la dernière version d'ECMAScript
      "sourceType": "module",   // Active le support des modules ES (import/export)
      "project": "./tsconfig.json"  // Chemin vers tsconfig.json pour TypeScript
    },

    /*
     * PLUGINS
     * Liste des plugins ESLint à utiliser.
     * Chaque plugin ajoute des règles spécifiques.
     */
    "plugins": [
      "react",                // Plugin pour React
      "react-hooks",          // Plugin pour les React Hooks
      "@typescript-eslint"    // Plugin pour TypeScript
    ],

    /*
     * RÈGLES
     * Configuration personnalisée des règles ESLint.
     * Format: "nom-de-la-règle": ["niveau", "options"]
     * Niveaux: "off" (0), "warn" (1), "error" (2)
     */
    "rules": {
      /* ========== RÈGLES DE BASE ========== */
      "indent": ["error", 2],  // Force une indentation de 2 espaces (standard React/JS)
      "quotes": ["error", "double"],  // Utilise des guillemets doubles ("") pour les chaînes
      "semi": ["error", "always"],  // Oblige à mettre un point-virgule à la fin des instructions
      "no-console": "warn",  // Avertit si console.log() est utilisé (utile en production)
      "no-undef": "off",  // Désactivé car géré par TypeScript
      "no-unused-vars": "off",  // Désactivé car géré par TypeScript

      /* ========== RÈGLES TYPESCRIPT ========== */
      "@typescript-eslint/no-unused-vars": "warn",  // Avertit des variables non utilisées (en warning)
      "@typescript-eslint/no-explicit-any": "off",  // Autorise le type any (temporaire)

      /* ========== RÈGLES REACT ========== */
      "react/prop-types": "off",  // Désactive la vérification des propTypes (TypeScript les remplace)
      "react/react-in-jsx-scope": "off",  // Pas besoin d'importer React dans chaque fichier (React 17+)
      "react/self-closing-comp": ["error", {
        "component": true,
        "html": true
      }],
      "react/jsx-uses-react": "off",  // Pas besoin d'importer React avec la nouvelle JSX transform
      "react/jsx-uses-vars": "error",  // Vérifie que les variables JSX sont utilisées
      "react/no-unescaped-entities": "warn",  // Met les apostrophes non échappées en warning

      /* ========== RÈGLES REACT HOOKS ========== */
      "react-hooks/rules-of-hooks": "error",  // Vérifie les règles des hooks
      "react-hooks/exhaustive-deps": "warn"  // Avertit des dépendances manquantes
    },

    /*
     * PARAMÈTRES
     * Configuration supplémentaire pour les plugins.
     */
    "settings": {
      "react": {
        "version": "detect"  // Détecte automatiquement la version de React utilisée
      }
    },

    /*
     * SURCHARGES
     * Règles spécifiques pour certains fichiers.
     */
    "overrides": [
      {
        // Applique ces règles uniquement aux fichiers de test
        "files": ["**/*.test.ts", "**/*.test.tsx", "**/__tests__/**/*.ts", "**/__tests__/**/*.tsx", "**/__mocks__/**/*.ts"],
        "rules": {
          "no-console": "off",  // Autorise console.log dans les tests
          "@typescript-eslint/no-empty-function": "off",  // Autorise les fonctions vides dans les tests (pour les mocks)
          "@typescript-eslint/no-var-requires": "off"  // Autorise require() dans les tests
        }
      }
    ]
  }
